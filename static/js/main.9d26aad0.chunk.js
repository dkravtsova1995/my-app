(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),o=a(70),i=a.n(o),r=(a(77),a(12)),c=a(13),u=a(15),m=a(14),l=a(16),h=(a(78),a(79),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={rooms:[],newRoomName:""},a.roomsRef=a.props.firebase.database().ref("rooms"),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.roomsRef.on("child_added",function(t){var a=t.val();a.key=t.key,e.setState({rooms:e.state.rooms.concat(a)}),1===e.state.rooms.length&&e.props.setActiveRoom(a)}),this.roomsRef.on("child_removed",function(t){e.setState({rooms:e.state.rooms.filter(function(e){return e.key!==t.key})})})}},{key:"createRoom",value:function(e){this.roomsRef.push({name:e,createdAt:Date.now()}),this.setState({newRoomName:""})}},{key:"handleChange",value:function(e){this.setState({newRoomName:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.createRoom(this.state.newRoomName)}},{key:"render",value:function(){var e=this;return n.a.createElement("section",{className:"rooms-list"},this.state.rooms.map(function(t){return n.a.createElement("div",{key:t.key},n.a.createElement("button",{className:"room-name",onClick:function(){return e.props.setActiveRoom(t)}},t.name))}),n.a.createElement("form",{id:"create-room",onSubmit:function(t){e.handleSubmit(t)}},n.a.createElement("input",{type:"text",value:this.state.newRoomName,onChange:this.handleChange.bind(this),name:"newRoomName",placeholder:"New Room"}),n.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(s.Component)),p=a(71),f=a.n(p),d=(a(81),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={allMessages:[],newMessageText:""},a.messagesRef=a.props.firebase.database().ref("messages"),a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.messagesRef.on("child_added",function(t){var a=t.val();a.key=t.key,e.setState({allMessages:e.state.allMessages.concat(a)})}),this.messagesRef.on("child_removed",function(t){e.setState({allMessages:e.state.allMessages.filter(function(e){return e.key!==t.key})})})}},{key:"createMessage",value:function(e){this.messagesRef.push({username:this.props.user?this.props.user.displayName:"Guest",content:e,sentAt:this.props.firebase.database.ServerValue.TIMESTAMP,roomId:this.props.activeRoom.key}),this.setState({newMessageText:""})}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState({newMessageText:e.target.value})}},{key:"removeMessage",value:function(e){this.messagesRef.child(e.key).remove()}},{key:"displayedMessages",value:function(){var e=this;return this.state.allMessages.filter(function(t){return t.roomId===e.props.activeRoom.key})}},{key:"render",value:function(){var e=this;return n.a.createElement("main",{id:"messages-component"},n.a.createElement("h2",{className:"room-name"},this.props.activeRoom?this.props.activeRoom.name:""),n.a.createElement("ul",{id:"message-list"},this.displayedMessages().map(function(t){return n.a.createElement("li",{className:"message-info",key:t.key},n.a.createElement("div",{className:"username"},t.username),n.a.createElement("div",{className:"content"},t.content),n.a.createElement(f.a,{element:"span",format:"MM/DD/YY hh:mm A",className:"sent-at"},t.sentAt),n.a.createElement("button",{type:"button",className:"btn-remove-msg",onClick:function(){return e.removeMessage(t)}},"X"))})),n.a.createElement("form",{id:"create-message",onSubmit:function(t){t.preventDefault(),e.createMessage(e.state.newMessageText)}},n.a.createElement("input",{type:"text",value:this.state.newMessageText,onChange:this.handleChange.bind(this),name:"newMessageText",placeholder:"Write your message here..."}),n.a.createElement("input",{type:"submit",value:"Send"})))}}]),t}(s.Component)),v=function(e){function t(){return Object(r.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth().onAuthStateChanged(function(t){e.props.setUser(t)})}},{key:"signIn",value:function(){var e=this,t=new this.props.firebase.auth.GoogleAuthProvider;this.props.firebase.auth().signInWithPopup(t).then(function(t){var a=t.user;e.props.setUser(a)})}},{key:"signOut",value:function(){var e=this;this.props.firebase.auth().signOut().then(function(){e.props.setUser(null)})}},{key:"render",value:function(){return n.a.createElement("section",{className:"user-display"},n.a.createElement("div",{className:"user-display-name"},this.props.user?this.props.user.displayName:""),n.a.createElement("button",{className:"sign-in-out",onClick:this.props.user?this.signOut.bind(this):this.signIn.bind(this)},n.a.createElement("span",null,"Sign ",this.props.user?"out":"in")))}}]),t}(s.Component),g=a(26);g.initializeApp({apiKey:"AIzaSyDA03YY2qfaeV5bq9RPegkT0GmHO-JB9WQ",authDomain:"rooms-935de.firebaseapp.com",databaseURL:"https://rooms-935de.firebaseio.com",projectId:"rooms-935de",storageBucket:"rooms-935de.appspot.com",messagingSenderId:"578717852404"});var b=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={activeRoom:null,user:null},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"setActiveRoom",value:function(e){this.setState({activeRoom:e})}},{key:"setUser",value:function(e){this.setState({user:e})}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",null,n.a.createElement("h1",null,"Bloc Chat"),n.a.createElement(h,{firebase:g,activeRoom:this.state.activeRoom,setActiveRoom:this.setActiveRoom.bind(this),user:this.state.user}),n.a.createElement(d,{firebase:g,activeRoom:this.state.activeRoom,user:this.state.user}),n.a.createElement(v,{firebase:g,setUser:this.setUser.bind(this),user:this.state.user})),n.a.createElement("main",null))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},72:function(e,t,a){e.exports=a(163)},77:function(e,t,a){},78:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},79:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.9d26aad0.chunk.js.map